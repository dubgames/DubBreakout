objc_library(
    name = "mac_sdl2",
	  includes = [
    	"include"
    ],
    srcs = glob([
        "src/*.h",
        "src/*.c",
        "src/thread/generic/*.h",
        "src/thread/pthread/*.h",
        "src/thread/pthread/*.c",
        "src/thread/generic/SDL_syssem.c",
        "src/thread/*.h",
        "src/thread/*.c",
        "src/atomic/*.c",
        "src/loadso/dlopen/SDL_sysloadso.c",
		    "src/audio/coreaudio/*.h",
        "src/audio/coreaudio/*.m",
        "src/audio/dummy/*.h",
        "src/audio/dummy/*.c",
        "src/audio/disk/*.h",
        "src/audio/disk/*.c",
	    	"src/audio/*.h",
        "src/audio/*.c",
        "src/cpuinfo/*.c",
        "src/dynapi/*.c",
    		"src/events/*.h",
        "src/events/*.c",
        "src/joystick/*.h",
        "src/joystick/*.c",
        "src/joystick/darwin/*.h",
        "src/joystick/darwin/*.c",
        "src/haptic/*.h",
        "src/haptic/*.c",
        "src/haptic/darwin/*.h",
        "src/haptic/darwin/*.c",
        "src/file/cocoa/*.h",
        "src/file/cocoa/*.m",
        "src/file/*.h",
        "src/file/*.c",
        "src/libm/*.h",
        "src/libm/*.c",
	    	"src/render/*.h",
        "src/render/*.c",
        "src/render/*/**",
        "src/stdlib/*.h",        
        "src/stdlib/*.c",
        "src/timer/*.h",
        "src/timer/*.c",
	    	"src/video/*.h",
        "src/video/*.c",
        "src/video/dummy/*.h",
        "src/video/dummy/*.c",
        "src/video/cocoa/*.h",
        "src/video/cocoa/*.c",
        "src/video/cocoa/*.m",
	    	"src/video/khronos/vulkan/*.h",
        "src/video/khronos/vulkan/*.c",
#	    	"src/video/khronos/cocoa/*.h",
#        "src/video/khronos/cocoa/*.c",
        "src/power/*.h",
        "src/power/*.c",
        "src/power/macosx/*.h",
        "src/power/macosx/*.c",
        "src/timer/unix/*.c",
        "src/filesystem/cocoa/*.m",
        "src/dynapi/*.h",
    ], exclude = [
        "src/thread/pthread/SDL_syssem.c",
#        "src/video/SDL_vulkan_internal.h",
#        "src/video/SDL_sysvideo.h",
    ],),
    hdrs = glob([
        "include/SDL.h",
        "include/*.h",
    ]),
    sdk_frameworks = [
        "AudioToolBox",
        "CoreAudio",
        "IOKit",
        "CoreGraphics",
        "CoreImage",
        "Cocoa",
        "Carbon",
        "ForceFeedback",
        "QuartzCore",
        "OpenGL",
    ],
    defines = [
        "SDL_VIDEO_VULKAN",
    ],
    copts = [
        "-fno-objc-arc"
    ],
    visibility = ["//visibility:public"],
)

cc_library(
    name="sdl2_headers",
    includes=[
      "include",
        "src/SDL_internal.h",
    ],
    srcs = glob([
        "include/*.h",
#        "src/SDL_internal.h",
#        "src/dynapi/SDL_dynapi.h",
    ]),
    defines = [
        "SDL_AUDIO_DRIVER_COREAUDIO",
    ],
    visibility = ["//visibility:public"],
)

#apple_binary(
#    name = "mac_sdl2",
#    platform_type = "macos",
#    deps = [
#        "sdl2_library",
#    ],
#    visibility = ["//visibility:public"],
#)